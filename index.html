<html>
    <script>
        class pupil {
            name;
            constructor(name) {
                this.name = name;
            }
        }

        let flip = true;

        let list_names = [];

        let clicky = function () {
            var text = flip ? "Hello World!" : "Hallo Welt!";
            flip = !flip;
            document.getElementById("haha1").innerHTML = text;
        }

        let appendUL = function(ul, content) {
            var li = document.createElement("li");
            li.appendChild(document.createTextNode(content));
            document.getElementById(ul).appendChild(
                li
            );
        }

        let submitName = function () {
            var name = document.getElementById("fname").value;
            appendUL("names", name)
            list_names.push(new pupil(name))
        }

        const rand = (length) => {return Math.floor(Math.random() * length)};
        

        let generate = function ()  {
            if (list_names.length % 2 == 1) {
                var random = rand(list_names.length)
                var leftover = list_names[random]
                document.getElementById("leftover").innerHTML = "Leftover: " + leftover.name;
                list_names = list_names.filter((item) => {return item != leftover})
            }
            while (list_names.length >= 2) {
                var a = list_names[rand(list_names.length)]
                list_names = list_names.filter((item) => {return item != a})
                var b = list_names[rand(list_names.length)]
                list_names = list_names.filter((item) => {return item != b})
                
                appendUL("combs", (a.name + " and " + b.name))
            }
        }
    </script>

    <body>
        <h1 id="haha1">Hello</h1>
        <button onclick="clicky()">Click me</button>
        <br>
        <br>
        <form onsubmit="submitName(); return false;">
            <label for="fname">Name</label><br>
            <input type="text"id="fname" name="fname"><br>
            <input type="submit" value="Name eingeben">
        </form>
        <br>
        <br>
        <ul id="names">

        </ul>
        <br>
        <br>
        <button onclick="generate()">Generate combinations</button>
        <br>
        <br>
        <h4>combinations</h4>
        <p id="leftover"></p><br>
        <ul id="combs"></ul>
    </body>
</html>